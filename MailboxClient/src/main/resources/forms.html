<html>
    <head>
        <title>ASRimbra !</title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    </head>
    <body>
        <h4>Login:</h4>
        <form method="post" target="ASRimbra" action="http://localhost:4567/connect/">
            <label for="mail">Mail : <input type="email" name="mail" id="mail" /></label><br />
            <label for="password">Password : <input type="password" name="password" id="password" /></label>
            <input type="submit" value="Log in">
        </form>

        <h4>Logout:</h4>
        <form method="get" target="ASRimbra" action="http://localhost:4567/mailbox/disconnect/">
            <input type="submit" value="Log off">
        </form>

        <h4>Mailbox:</h4>
        <form method="get" target="ASRimbra" action="http://localhost:4567/mailbox/">
            <input type="submit" value="Go to mailbox"/>
        </form>

        <h4>Send mail:</h4>
        <form method="post" target="ASRimbra" action="http://localhost:4567/mailbox/send/">
            <label for="to">To : <input type="email" name="to" id="to" /></label><br />
            <label for="title">Title : <input type="text" name="title" id="title" /></label><br />
            <label for="content">Content : <textarea name="content" id="content"></textarea></label><br />
            <input type="submit" value="Send"/>
        </form>

        <div id="error"></div>
        <div id="ASRimbra"></div>
        <script>
            $('form').submit(function(e) {
                e.preventDefault();
                var form = $(this);
                $.ajax({
                    url: form.attr('action'),
                    type: form.attr('method'),
                    data: form.serialize(),
                    success: function(data) {
                        $("#"+form.attr('target')).html(data);
                    },
                    error: function(data) {
                        $("#"+form.attr('target')).html(data.responseText);
                    },
                    xhrFields: {
                        withCredentials: true
                    },
                    crossDomain: true
                })
            });
        </script>
    </body>
</html>